<!DOCTYPE HTML>
<html>
    <head>
        <title>Gere</title>
        <style>
            body {
                margin: 0px;
                padding: 0px;
                padding-left: 15px;
            }
            .aButton {
                margin-top: 15px;
                margin-left: -2px;
            }
            p {
                margin-bottom: 10px;
            }
            canvas {
                margin-bottom: -500px;
                z-index: -1;
                position: absolute;
            }
            .tutorial{
                height: 95px !important;
                width: 242px !important;
                padding-top: 20px;
                padding-right: 10px;
                padding-left: 10px;
                white-space: pre-wrap !important;
                background: orange !important;
            }
            .classBox {
                width: 555px;
                position: absolute;
                border: dashed 2px gray;
                margin-top: 210px;
                margin-left: 50px;
                padding: 15px;
                padding-left: 25px;
            }
            .spinBox {
                width: 278px;
                display: inline-block;
            }
            .upgradeContainerStyle1 {
                height: 115px;
                width: 262px;
                border: dashed 2px gray;
                display: inline-block;
                vertical-align: text-bottom;
            }
            .upgradeContainerStyle2 {
                height: 50px;
                width: 262px;
                border: dashed 2px gray;
                display: inline-block;
                vertical-align: text-bottom;
            }
            .upgradeContainerStyle3 {
                height: 30px;
                width: 262px;
                margin-top: 3px;
                margin-bottom: 3px;
                border: dashed 2px gray;
                display: inline-block;
                vertical-align: text-bottom;
            }
            .upgradeBox {
                width: 262px;
                display: inline-block;
            }
            #upgradeContainer2 {
                margin-bottom: 5px;
            }
            #upgradeContainer3 {
                margin-bottom: 5px;
            }
            .winBox {
                color: gold;
                font-size: 50px;
                position: absolute;
                margin-top: 170px;
                margin-left: 400px;
            }
            .buttonStyle2 {
                height: 100%;
                width: 100%;
                display: inline-block;
                border: none;
                margin: 0;
                text-decoration: none;
                background: #0069ed;
                color: #ffffff;
                font-family: sans-serif;
                font-size: 1rem;
                cursor: pointer;
                line-height: 1.2;
                white-space: nowrap;
                text-align: center;
                transition: background 250ms ease-in-out, 
                            transform 150ms ease;
                -webkit-appearance: none;
                -moz-appearance: none;
            }
            .buttonStyle3 {
                height: 100%;
                width: 100%;
                display: inline-block;
                border: none;
                margin: 0;
                text-decoration: none;
                background: #0069ed;
                color: #ffffff;
                font-family: sans-serif;
                font-size: 1rem;
                cursor: pointer;
                line-height: 1.2;
                white-space: nowrap;
                text-align: center;
                transition: background 250ms ease-in-out, 
                            transform 150ms ease;
                -webkit-appearance: none;
                -moz-appearance: none;
                white-space: nowrap;
                text-overflow: ellipsis;
                overflow: hidden;
                display: inherit;
            }
            .buttonStyle2:hover,
            .buttonStyle2:focus {
                opacity: 0.9;
            }

            .buttonStyle2:focus {
                outline: 1px solid #fff;
                outline-offset: -4px;
            }

            .buttonStyle2:active {
                transform: scale(0.99);
            }
        </style>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    </head>
    <body data-rsssl=1>
        <div class="container">
            <canvas id="gearCanvas" width="1500" height="700"></canvas>
            <div class="classBox">
                <div class="spinBox">
                    <button id="plusSpeed" class="aButton">cheat</button>
                    <button id="subtractSpeed" class="aButton">-</button>
                    <button id="spin" class="aButton">Spin</button>
                    <p id="speed"></p>
                    <p id="FirstRotateCounter">0</p>
                    <p id="FinalRotateCounter">0</p>
                </div>
                <div class="upgradeBox">
                    <div class="upgradeContainerStyle1" id="upgradeContainer1">
                        <p class="tutorial buttonStyle2">The goal of the game is to spin the final gear(bottom) one rotation. Starting by clicking the spin button to the left </p>
                        <button class="buttonStyle2 spinUpgrade1" style="display: none;">Double manual spin value<br> 10FS</button>
                        <button class="buttonStyle2 pathUpgrade1" style="display: none; background: #d33114">Unlock new upgrade path<br> 25FS</button>
                        <button class="buttonStyle2 pathUpgrade2" style="display: none; background: #d33114">Unlock new upgrade path<br> 500FS</button>
                    </div>
                    <div class="upgradeContainerStyle2" id="upgradeContainer2" style="display: none;">
                        <button class="buttonStyle2 spinUpgrade1" style="display: none;">X2 manual spin value<br> 10FS</button>
                        <button class="buttonStyle2 spinUpgrade2" style="display: none;">X2 manual spin value<br> 100FS</button>
                    </div>
                    <div class="upgradeContainerStyle2" id="upgradeContainer3" style="display: none;">
                        <button class="buttonStyle2 autoUpgrade1" style="display: none; background: #f4ec09; color: black;">Auto spin level 1<br> 75FS</button>
                        <button class="buttonStyle2 autoUpgrade2" style="display: none; background: #f4ec09; color: black;">Auto spin level 2<br> 150FS</button>
                    </div>
                    <div class="upgradeContainerStyle3" id="upgradeContainer4" style="display: none;">
                        <button class="buttonStyle3 spinUpgrade3" style="display: none;">X3 manual spin value 600FS</button>
                        <button class="buttonStyle3 spinUpgrade4" style="display: none;">X4 manual spin value 1500FS</button>
                    </div>
                    <div class="upgradeContainerStyle3" id="upgradeContainer5" style="display: none;">
                        <button class="buttonStyle3 autoUpgrade3" style="display: none; background: #f4ec09; color: black;">Auto spin level 3 650FS</button>
                        <button class="buttonStyle3 autoUpgrade4" style="display: none; background: #f4ec09; color: black;">Auto spin level 4 3000FS</button>
                    </div>
                    <div class="upgradeContainerStyle3" id="upgradeContainer6" style="display: none;">
                        <button class="buttonStyle3 resistanceUpgrade1" style="display: none; background: #59a716;">Speed decay level 1 1000FS</button>
                        <button class="buttonStyle3 resistanceUpgrade2" style="display: none; background: #59a716;">Speed decay level 2 5000FS</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="winBox"></div>
        <script>

        window.requestAnimFrame = (function(callback) {
            return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
            function(callback) {
            window.setTimeout(callback, 1000 / 60);
            };
        })();
        /*
        * Gear constructor
        */
        var setCanvasSize = function() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        }
        function Gear(config) {
            this.x = config.x;
            this.y = config.y;
            this.outerRadius = config.outerRadius;
            this.innerRadius = config.innerRadius;
            this.midRadius = config.midRadius;
            this.holeRadius = config.holeRadius;
            this.numTeeth = config.numTeeth;
            this.theta = config.theta;
            this.adjustedTheta = config.adjustedTheta;
            this.thetaSpeed = config.thetaSpeed / 1000;
            this.lightColor = config.lightColor;
            this.darkColor = config.darkColor;
            this.innerGearOuterRadius = config.innerGearOuterRadius;
            this.innerGearInnerRadius = config.innerGearInnerRadius;
            this.innerGearMidRadius = config.innerGearMidRadius;
            this.innerGearNumTeeth = config.innerGearNumTeeth;
            this.innerGearLightColor = config.innerGearLightColor;
            this.innerGearDarkColor = config.innerGearDarkColor;
            // this.tutorial = config.tutorial;
            this.clockwise = config.clockwise;
        }
        /*
        * Gear draw method
        */
        Gear.prototype.draw = function() {
            var canvas = document.getElementById('gearCanvas');
            var context = canvas.getContext('2d');

            context.save();
            var numPoints = this.numTeeth * 2;
            // draw gear teeth
            context.beginPath();
            context.lineJoin = 'bevel';
            for(var n = 0; n < numPoints; n++) {

            var radius = null;

            if(n % 2 == 0) {
                radius = this.outerRadius;
            }
            else {
                radius = this.innerRadius;
            }

            var theta = this.theta;
            theta += ((Math.PI * 2) / numPoints) * (n + 1);

            var x = (radius * Math.sin(theta)) + this.x;
            var y = (radius * Math.cos(theta)) + this.y;

            if(n == 0) {
                context.moveTo(x, y);
            }
            else {
                context.lineTo(x, y);
            }
            }

            context.closePath();
            context.lineWidth = 5;
            context.strokeStyle = this.darkColor;
            context.stroke();

            // draw gear body
            context.beginPath();
            context.arc(this.x, this.y, this.midRadius, 0, 2 * Math.PI, false);

            // var grd = context.createLinearGradient(this.x - 100, this.y - 100, this.x + 100, this.y + 100);
            // grd.addColorStop(0, this.lightColor);
            // grd.addColorStop(1, this.darkColor);
            var grd = this.lightColor;
            context.fillStyle = grd;
            context.fill();
            context.lineWidth = 5;
            context.strokeStyle = this.darkColor;
            context.stroke();

            // draw inner gear teeth
            var InnerNumPoints = this.innerGearNumTeeth * 2;
            context.beginPath();
            context.lineJoin = 'bevel';
            for(var n = 0; n < InnerNumPoints; n++) {

            var radius = null;

            if(n % 2 == 0) {
                radius = this.innerGearOuterRadius;
            }
            else {
                radius = this.innerGearInnerRadius;
            }

            var theta = this.theta;
            theta += ((Math.PI * 2) / InnerNumPoints) * (n + 1);

            var x = (radius * Math.sin(theta)) + this.x;
            var y = (radius * Math.cos(theta)) + this.y;

            if(n == 0) {
                context.moveTo(x, y);
            }
            else {
                context.lineTo(x, y);
            }
            }

            context.closePath();
            context.lineWidth = 5;
            context.strokeStyle = this.innerGearDarkColor;
            context.stroke();

            // draw inner gear body
            context.beginPath();
            context.arc(this.x, this.y, this.innerGearMidRadius, 0, 2 * Math.PI, false);

            // var grd = context.createLinearGradient(this.x - 100, this.y - 100, this.x + 100, this.y + 100);
            // grd.addColorStop(0, this.innerGearLightColor);
            // grd.addColorStop(1, this.innerGearDarkColor);
            var grd = this.innerGearLightColor;
            context.fillStyle = grd;
            context.fill();
            context.lineWidth = 5;
            context.strokeStyle = this.innerGearDarkColor;
            context.stroke();

            // draw gear hole
            context.beginPath();
            context.arc(this.x, this.y, this.holeRadius, 0, 2 * Math.PI, false);
            context.fillStyle = 'white';
            context.fill();
            context.strokeStyle = this.innerGearDarkColor;
            context.stroke();
            context.restore();
        };
        function animate(gears, lastTime) {
            var canvas = document.getElementById('gearCanvas');
            var context = canvas.getContext('2d');

            // update
            var time = (new Date()).getTime();
            var timeDiff = time - lastTime;

            for(var i = 0; i < gears.length; i++) {
                var gear = gears[i];

                if(gears[i].clockwise) {
                    gears[i].theta -= (gear.thetaSpeed * timeDiff);
                }
                else {
                    gears[i].theta += (gear.thetaSpeed * timeDiff);
                }
            }

            // clear
            context.clearRect(0, 0, canvas.width, canvas.height);

            // draw
            for(var i = 0; i < gears.length; i++) {
                gears[i].draw();
            }

            // request new frame
            requestAnimFrame(function() {
                animate(gears, time);
            });
        }

        // get random color
        function getRandomColor() {
        var letters = '0123456789ABCDEF';
        var color = '#';
        for (var i = 0; i < 6; i++) {
            color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
        }

        function padZero(str, len) {
            len = len || 2;
            var zeros = new Array(len).join('0');
            return (zeros + str).slice(-len);
        }

        var gears = [];

        var iter = 0;
        while(iter < 14){
            gears.push(new Gear({
            x: 120,
            y: 105,
            outerRadius: 90,
            innerRadius: 50,
            midRadius: 80,
            holeRadius: 1,
            numTeeth: 24,
            theta: 0,
            adjustedTheta: 0,
            thetaSpeed: 1,
            lightColor: '#000000',
            darkColor: getRandomColor(),
            innerGearOuterRadius: 40,
            innerGearInnerRadius: 20,
            innerGearMidRadius: 30,
            innerGearNumTeeth: 8,
            innerGearLightColor: '#FFFFFF',
            innerGearDarkColor: '#FFFFFF',
            tutorial: true,
            // clockwise: false
        }));
        if(iter%2 != 0){
            gears[iter].clockwise = true;
        }
        else{
            gears[iter].clockwise = false;
        }
        if(iter > 0){
            gears[iter].innerRadius = 0;
            gears[iter].midRadius = 0;
            gears[iter].outerRadius = 0;
            gears[iter].innerGearInnerRadius = 0;
            gears[iter].innerGearMidRadius = 0;
            gears[iter].innerGearOuterRadius = 0;
            gears[iter].holeRadius = 0;
            if(iter < 6){
                gears[iter].x = (gears[iter-1].x + 127);
            }
            else{
                if(iter < 9){
                    gears[iter].y = (gears[iter-1].y + 127);
                    gears[iter].x = 755;
                }
                else{
                    gears[iter].x = (gears[iter-1].x - 127);
                    gears[iter].y = 486;
                }
            }
        }
        iter++
        }
        appearGear(13);

        gears[1].adjustedTheta = -0.07;
        gears[1].theta = -0.07;
        gears[2].adjustedTheta = 0.1;
        gears[2].theta = 0.1;
        gears[3].adjustedTheta = -0.12;
        gears[3].theta = -0.12;
        var iter2 = 4;
        while(iter2 < 14){
            gears[iter2].adjustedTheta = 0.12;
            gears[iter2].theta = 0.12;
            iter2++;
        }
        var time = (new Date()).getTime();
        animate(gears, time);

        // // invert color for inner gear
        // function invertColor(hex) {
        // if (hex.indexOf('#') === 0) {
        //     hex = hex.slice(1);
        // }
        // if (hex.length === 3) {
        //     hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];
        // }
        // if (hex.length !== 6) {
        //     throw new Error('Invalid HEX color.');
        // }
        // var r = (255 - parseInt(hex.slice(0, 2), 16)).toString(16),
        //     g = (255 - parseInt(hex.slice(2, 4), 16)).toString(16),
        //     b = (255 - parseInt(hex.slice(4, 6), 16)).toString(16);
        // return '#' + padZero(r) + padZero(g) + padZero(b);
        // }

        // for(var j = 0; j < gears.length; j++){
        //     gears[j].thetaSpeed = 0;
        //     gears[j].innerGearLightColor = invertColor(gears[j].lightColor);
        //     gears[j].innerGearDarkColor = invertColor(gears[j].darkColor);
        //     if(j > 0){
        //         gears[j].thetaSpeed = gears[j-1].thetaSpeed/3;
        //     }
        // }

        for(var j = 0; j < gears.length; j++){
            gears[j].thetaSpeed = 0;
            gears[j].innerGearLightColor = getRandomColor();
            gears[j].innerGearDarkColor = getRandomColor();
            if(j > 0){
                gears[j].thetaSpeed = gears[j-1].thetaSpeed/3;
            }
        }

        // document.getElementById("speed").innerHTML = "Speed: " + gears[0].thetaSpeed*1000;

        $( "#plusSpeed" ).click(function() {
            gears[0].thetaSpeed += 1000
        });
        $( "#subtractSpeed" ).click(function() {
            gears[0].thetaSpeed -= gameData.spinClickSpeed;
        });

        //spin first gear
        $( "#spin" ).click(function() {
            gears[0].thetaSpeed += gameData.spinClickSpeed;
        });
        
        var gameData = {
            spinClickSpeed: 0.001,
            spinUpgrades: [
                {
                    affordable: false,
                    purchased: false,
                },
                {
                    affordable: false,
                    purchased: false,
                },
                {
                    affordable: false,
                    purchased: false,
                },
                {
                    affordable: false,
                    purchased: false,
                },
                {
                    affordable: false,
                    purchased: false,
                }
            ],
            pathUpgrades: [
                {
                    affordable: false,
                    purchased: false,
                },
                {
                    affordable: false,
                    purchased: false,
                },
                {
                    affordable: false,
                    purchased: false,
                },
            ],
            autoSpinUpgrades: [
                {
                    affordable: false,
                    purchased: false,
                },
                {
                    affordable: false,
                    purchased: false,
                },
                {
                    affordable: false,
                    purchased: false,
                },
                {
                    affordable: false,
                    purchased: false,
                },
            ],
            resistanceUpgrades: [
                {
                    affordable: false,
                    purchased: false,
                },
                {
                    affordable: false,
                    purchased: false,
                },
                {
                    affordable: false,
                    purchased: false,
                },
                {
                    affordable: false,
                    purchased: false,
                },
            ],
            autoFSpersecond: 0,
            FSpersecond: 0,
            gearResistance: 1.01,
            firstGearRotations: 0,
            lastGearRotations: 0,
            upgradeLock: false,
        }

        function appearGear(num){
            gears[num].innerRadius = 50;
            gears[num].midRadius = 80;
            gears[num].outerRadius = 90;
            gears[num].innerGearInnerRadius = 20;
            gears[num].innerGearMidRadius = 30;
            gears[num].innerGearOuterRadius = 40;
            gears[num].holeRadius = 1;
        }
        
        // ██    ██ ██████   ██████  ██████   █████  ██████  ███████ ███████ 
        // ██    ██ ██   ██ ██       ██   ██ ██   ██ ██   ██ ██      ██      
        // ██    ██ ██████  ██   ███ ██████  ███████ ██   ██ █████   ███████ 
        // ██    ██ ██      ██    ██ ██   ██ ██   ██ ██   ██ ██           ██ 
        //  ██████  ██       ██████  ██   ██ ██   ██ ██████  ███████ ███████                  
        //manual spin upgrades
        $( ".spinUpgrade1" ).click(function() {
            if(gameData.spinUpgrades[0].purchased == false && gameData.spinUpgrades[0].affordable == true && gameData.upgradeLock == false){
                $(".buttonStyle2").css("height", "100%")
                gameData.spinClickSpeed *= 2;
                gameData.spinUpgrades[0].purchased = true;
                $(".spinUpgrade1").hide();
                rewindGears(10*(Math.PI*2));
            }
        });
        
        $( ".spinUpgrade2" ).click(function() {
            if(gameData.spinUpgrades[1].purchased == false && gameData.spinUpgrades[1].affordable == true && gameData.upgradeLock == false){
                gameData.spinClickSpeed *= 2;
                gameData.spinUpgrades[1].purchased = true;
                $(".spinUpgrade2").hide();
                // $("#upgradeContainer2").hide();
                rewindGears(100*(Math.PI*2));
            }
        });

        $( ".spinUpgrade3" ).click(function() {
            if(gameData.spinUpgrades[2].purchased == false && gameData.spinUpgrades[2].affordable == true && gameData.upgradeLock == false){
                gameData.spinClickSpeed *= 3;
                gameData.spinUpgrades[2].purchased = true;
                $(".spinUpgrade3").hide();
                // $("#upgradeContainer4").hide();
                rewindGears(600*(Math.PI*2));
            }
        });

        $( ".spinUpgrade4" ).click(function() {
            if(gameData.spinUpgrades[3].purchased == false && gameData.spinUpgrades[3].affordable == true && gameData.upgradeLock == false){
                gameData.spinClickSpeed *= 4;
                gameData.spinUpgrades[3].purchased = true;
                $(".spinUpgrade4").hide();
                // $("#upgradeContainer4").hide();
                rewindGears(1500*(Math.PI*2));
            }
        });

        //path upgrades
        $( ".pathUpgrade1" ).click(function() {
            if(gameData.pathUpgrades[0].purchased == false && gameData.pathUpgrades[0].affordable && gameData.upgradeLock == false){
                $(".buttonStyle2").css("height", "100%")
                gameData.pathUpgrades[0].purchased = true;
                $(".pathUpgrade1").hide();
                $("#upgradeContainer1").hide();
                rewindGears(25*(Math.PI*2));
            }
        });

        $( ".pathUpgrade2" ).click(function() {
            if(gameData.pathUpgrades[1].purchased == false && gameData.pathUpgrades[1].affordable && gameData.upgradeLock == false){
                gameData.pathUpgrades[1].purchased = true;
                $(".pathUpgrade2").hide();
                $("#upgradeContainer1").hide();
                $("#upgradeContainer2").hide();
                $("#upgradeContainer3").hide();
                $("#upgradeContainer4").show();
                $("#upgradeContainer5").show();
                $("#upgradeContainer6").show();
                rewindGears(500*(Math.PI*2));
            }
        });

        //auto spin upgrades
        $( ".autoUpgrade1" ).click(function() {
            if(gameData.autoSpinUpgrades[0].purchased == false && gameData.autoSpinUpgrades[0].affordable && gameData.upgradeLock == false){
            gameData.autoSpinUpgrades[0].purchased = true;
            gameData.autoFSpersecond = 0.000062;
            $(".autoUpgrade1").hide();
            // $("#upgradeContainer3").hide();
            rewindGears(75*(Math.PI*2));
            }
        });
        
        $( ".autoUpgrade2" ).click(function() {
            if(gameData.autoSpinUpgrades[1].purchased == false && gameData.autoSpinUpgrades[1].affordable && gameData.upgradeLock == false){
            gameData.autoSpinUpgrades[1].purchased = true;
            gameData.autoFSpersecond = 0.0001865;
            $(".autoUpgrade2").hide();
            // $("#upgradeContainer3").hide();
            rewindGears(200*(Math.PI*2));
            }
        });

        $( ".autoUpgrade3" ).click(function() {
            if(gameData.autoSpinUpgrades[2].purchased == false && gameData.autoSpinUpgrades[2].affordable && gameData.upgradeLock == false){
            gameData.autoSpinUpgrades[2].purchased = true;
            gameData.autoFSpersecond = 0.000933;
            $(".autoUpgrade3").hide();
            // $("#upgradeContainer3").hide();
            rewindGears(650*(Math.PI*2));
            }
        });

        $( ".autoUpgrade4" ).click(function() {
            if(gameData.autoSpinUpgrades[3].purchased == false && gameData.autoSpinUpgrades[3].affordable && gameData.upgradeLock == false){
            gameData.autoSpinUpgrades[3].purchased = true;
            gameData.autoFSpersecond = 0.006221;
            $(".autoUpgrade4").hide();
            // $("#upgradeContainer3").hide();
            rewindGears(3000*(Math.PI*2));
            }
        });
        
        //resistance upgrades
        $( ".resistanceUpgrade1" ).click(function() {
            if(gameData.resistanceUpgrades[0].purchased == false && gameData.resistanceUpgrades[0].affordable && gameData.upgradeLock == false){
            gameData.resistanceUpgrades[0].purchased = true;
            gameData.gearResistance = 1.007
            $(".resistanceUpgrade1").hide();
            // $("#upgradeContainer3").hide();
            rewindGears(1000*(Math.PI*2));
            }
        });

        $( ".resistanceUpgrade2" ).click(function() {
            if(gameData.resistanceUpgrades[1].purchased == false && gameData.resistanceUpgrades[1].affordable && gameData.upgradeLock == false){
            gameData.resistanceUpgrades[1].purchased = true;
            gameData.gearResistance = 1.005
            $(".resistanceUpgrade2").hide();
            // $("#upgradeContainer3").hide();
            rewindGears(5000*(Math.PI*2));
            }
        });

        // ██████  ███████ ██     ██ ██ ███    ██ ██████      ███████ ██    ██ ███    ██  ██████ ████████ ██  ██████  ███    ██ 
        // ██   ██ ██      ██     ██ ██ ████   ██ ██   ██     ██      ██    ██ ████   ██ ██         ██    ██ ██    ██ ████   ██ 
        // ██████  █████   ██  █  ██ ██ ██ ██  ██ ██   ██     █████   ██    ██ ██ ██  ██ ██         ██    ██ ██    ██ ██ ██  ██ 
        // ██   ██ ██      ██ ███ ██ ██ ██  ██ ██ ██   ██     ██      ██    ██ ██  ██ ██ ██         ██    ██ ██    ██ ██  ██ ██ 
        // ██   ██ ███████  ███ ███  ██ ██   ████ ██████      ██       ██████  ██   ████  ██████    ██    ██  ██████  ██   ████ 
        //rewind gears after upgrade purchase
        function rewindGears(rotations){
            gameData.upgradeLock = true;
            tempRotations = rotations;
            for (var i = 0; i < 100; i++) {
                (function (i) {
                    setTimeout(function () {
                        for(var j = 0; j < gears.length; j++){
                            var adjustedRotations = (gears[j].theta - gears[j].adjustedTheta)
                            if(adjustedRotations >= 0){
                                gears[j].theta -= rotations/100;
                            }
                            else {
                                gears[j].theta += rotations/100;
                            }
                            rotations /= 3;
                        }
                    rotations = tempRotations;
                    }, 20*i);
                })(i);
            };
            setTimeout(function() { gameData.upgradeLock = false }, 300);
            //askavbsmbskd
        }

        //  ██████   █████  ███    ███ ███████     ███████ ██    ██ ███    ██  ██████ ████████ ██  ██████  ███    ██ 
        // ██       ██   ██ ████  ████ ██          ██      ██    ██ ████   ██ ██         ██    ██ ██    ██ ████   ██ 
        // ██   ███ ███████ ██ ████ ██ █████       █████   ██    ██ ██ ██  ██ ██         ██    ██ ██    ██ ██ ██  ██ 
        // ██    ██ ██   ██ ██  ██  ██ ██          ██      ██    ██ ██  ██ ██ ██         ██    ██ ██    ██ ██  ██ ██ 
        //  ██████  ██   ██ ██      ██ ███████     ██       ██████  ██   ████  ██████    ██    ██  ██████  ██   ████ 
        function gameTick() {
            gameData.firstGearRotations = Math.abs(gears[0].theta/(Math.PI*2));
            gameData.lastGearRotations = Math.abs((gears[gears.length - 1].theta/(Math.PI*2)) - 0.01909859);
            gameData.FSpersecond = (gears[0].thetaSpeed*1000)/(Math.PI*2);
            for(var j = 1; j < gears.length; j++){
                gears[j].thetaSpeed = gears[j-1].thetaSpeed/3;
                if((Math.abs(gears[j-1].theta - gears[j-1].adjustedTheta))/(Math.PI*2) >= 1)
                {
                    appearGear(j);
                }
            }
            gears[0].thetaSpeed /= gameData.gearResistance;
            document.getElementById("speed").innerHTML = "Speed: " + gameData.FSpersecond.toFixed(2) +"/s";
            document.getElementById("FirstRotateCounter").innerHTML = "Rotations of First Gear: " + gameData.firstGearRotations.toFixed(2);
            document.getElementById("FinalRotateCounter").innerHTML = "Rotations of Final Gear: " + gameData.lastGearRotations.toFixed(8);
            
            //STAGE 1
            if(gameData.pathUpgrades[0].purchased == false){
                if(gameData.spinUpgrades[0].purchased == false){
                    if(gameData.firstGearRotations >= 10){
                        $(".tutorial").hide();
                        gameData.tutorial = false;
                        gameData.spinUpgrades[0].affordable = true;
                        $(".spinUpgrade1").show();
                    }
                    else{
                        gameData.spinUpgrades[0].affordable = false;
                        if(gameData.tutorial == false){
                            $("#upgradeContainer1").hide();
                        }
                        $(".spinUpgrade1").hide();
                    }
                }
                if(gameData.pathUpgrades[0].purchased == false){
                    if(gameData.firstGearRotations >= 25){
                        if(gameData.spinUpgrades[0].purchased == false){
                            $(".buttonStyle2").css("height", "50%");
                        }
                        gameData.pathUpgrades[0].affordable = true;
                        $(".pathUpgrade1").show();
                    }
                    else{
                        gameData.pathUpgrades[0].affordable = false;
                        $(".pathUpgrade1").hide();
                        $(".buttonStyle2").css("height", "100%");
                    }
                }
                if(gameData.pathUpgrades[0].purchased == false && gameData.tutorial == false){
                    if((gameData.spinUpgrades[0].affordable == true && gameData.spinUpgrades[0].purchased == false )|| (gameData.pathUpgrades[0].affordable == true && gameData.pathUpgrades[0].purchased == false)){
                        $("#upgradeContainer1").show()
                    }
                    else{
                        $("#upgradeContainer1").hide();
                    }
                }
            }
            //STAGE 2
            if(gameData.pathUpgrades[0].purchased == true && gameData.pathUpgrades[1].purchased == false){
                if(gameData.spinUpgrades[1].purchased == false && gameData.spinUpgrades[0].purchased == false){
                    if(gameData.firstGearRotations >= 10){
                        gameData.spinUpgrades[0].affordable = true;
                        $(".spinUpgrade1").show();
                        $("#upgradeContainer2").show();
                    }
                    else{
                        gameData.spinUpgrades[0].affordable = false;
                        $(".spinUpgrade1").hide();
                        $("#upgradeContainer2").show();
                    }
                }
                if(gameData.spinUpgrades[1].purchased == false && gameData.spinUpgrades[0].purchased == true){
                    if(gameData.firstGearRotations >= 100){
                        gameData.spinUpgrades[1].affordable = true;
                        $(".spinUpgrade2").show();
                        $("#upgradeContainer2").show();
                    }
                    else{
                        gameData.spinUpgrades[1].affordable = false;
                        $(".spinUpgrade2").hide();
                        $("#upgradeContainer2").hide();
                    }
                }
                if(gameData.autoSpinUpgrades[0].purchased == false){
                    if(gameData.firstGearRotations >= 75){
                        gameData.autoSpinUpgrades[0].affordable = true;
                        $(".autoUpgrade1").show();
                        $("#upgradeContainer3").show();
                    }
                    else{
                        gameData.autoSpinUpgrades[0].affordable = false;
                        $(".autoUpgrade1").hide();
                        $("#upgradeContainer3").hide();
                    }
                }
                if(gameData.autoSpinUpgrades[1].purchased == false && gameData.autoSpinUpgrades[0].purchased == true){
                    if(gameData.firstGearRotations >= 150){
                        gameData.autoSpinUpgrades[1].affordable = true;
                        $(".autoUpgrade2").show();
                        $("#upgradeContainer3").show();
                    }
                    else{
                        gameData.autoSpinUpgrades[1].affordable = false;
                        $(".autoUpgrade2").hide();
                        $("#upgradeContainer3").hide();
                    }
                }
                if(gameData.pathUpgrades[1].purchased == false && gameData.autoSpinUpgrades[1].purchased == true && gameData.spinUpgrades[1].purchased == true){
                    if(gameData.firstGearRotations >= 500){
                        gameData.pathUpgrades[1].affordable = true;
                        $("#upgradeContainer2").hide();
                        $("#upgradeContainer3").hide();
                        $(".pathUpgrade2").show();
                        $("#upgradeContainer1").show();
                    }
                    else{
                        gameData.pathUpgrades[1].affordable = false;
                        $(".pathUpgrade2").hide();
                        $("#upgradeContainer3").hide();
                    }
                }
            }
            //STAGE 3
            if(gameData.pathUpgrades[1].purchased == true && gameData.pathUpgrades[2].purchased == false){
                if(gameData.spinUpgrades[2].purchased == false){
                    if(gameData.firstGearRotations >= 600){
                        gameData.spinUpgrades[2].affordable = true;
                        $(".spinUpgrade3").show();
                        // $("#upgradeContainer4").show();
                    }
                    else{
                        gameData.spinUpgrades[2].affordable = false;
                        $(".spinUpgrade3").hide();
                        // $("#upgradeContainer4").hide();
                    }
                }
                if(gameData.spinUpgrades[2].purchased == true && gameData.spinUpgrades[3].purchased == false){
                    if(gameData.firstGearRotations >= 1500){
                        gameData.spinUpgrades[3].affordable = true;
                        $(".spinUpgrade4").show();
                        // $("#upgradeContainer4").show();
                    }
                    else{
                        gameData.spinUpgrades[3].affordable = false;
                        $(".spinUpgrade4").hide();
                        // $("#upgradeContainer4").hide();
                    }
                }
                if(gameData.autoSpinUpgrades[2].purchased == false){
                    if(gameData.firstGearRotations >= 650){
                        gameData.autoSpinUpgrades[2].affordable = true;
                        $(".autoUpgrade3").show();
                        // $("#upgradeContainer5").show();
                    }
                    else{
                        gameData.autoSpinUpgrades[2].affordable = false;
                        $(".autoUpgrade3").hide();
                        // $("#upgradeContainer3").hide();
                    }
                }
                if(gameData.autoSpinUpgrades[3].purchased == false && gameData.autoSpinUpgrades[2].purchased == true){
                    if(gameData.firstGearRotations >= 3000){
                        gameData.autoSpinUpgrades[3].affordable = true;
                        $(".autoUpgrade4").show();
                        // $("#upgradeContainer5").show();
                    }
                    else{
                        gameData.autoSpinUpgrades[3].affordable = false;
                        $(".autoUpgrade4").hide();
                        // $("#upgradeContainer3").hide();
                    }
                }
                if(gameData.resistanceUpgrades[0].purchased == false){
                    if(gameData.firstGearRotations >= 1000){
                        gameData.resistanceUpgrades[0].affordable = true;
                        $(".resistanceUpgrade1").show();
                        // $("#upgradeContainer5").show();
                    }
                    else{
                        gameData.resistanceUpgrades[0].affordable = false;
                        $(".resistanceUpgrade1").hide();
                        // $("#upgradeContainer3").hide();
                    }
                }
                if(gameData.resistanceUpgrades[1].purchased == false && gameData.resistanceUpgrades[0].purchased == true){
                    if(gameData.firstGearRotations >= 5000){
                        gameData.resistanceUpgrades[1].affordable = true;
                        $(".resistanceUpgrade2").show();
                        // $("#upgradeContainer5").show();
                    }
                    else{
                        gameData.resistanceUpgrades[1].affordable = false;
                        $(".resistanceUpgrade2").hide();
                        // $("#upgradeContainer3").hide();
                    }
                }
            }



            gears[0].thetaSpeed += gameData.autoFSpersecond;

            if(gameData.lastGearRotations >= 1){
                Win();
            }
        }
        var GT = setInterval(gameTick, 20)
        function Win(){
            clearInterval(GT);
            $( ".container" ).remove();
            // $( ".target" ).show();
            // $(".winBox" "p").append("Nice");
            $( "<h1>Nice</h1>" ).appendTo( ".winBox" );
        }
        </script>
    </body>
</html>
